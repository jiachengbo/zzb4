"use strict";var validator=require("validator"),path=require("path"),crypto=require("crypto"),config=require(path.resolve("./config/config")),dbTools=require(path.resolve("./config/private/dbtools")),logger=require(path.resolve("./config/lib/logger")).getLogger_FileNameBase(__filename);exports.getLocalStorage=function(e,r){var o=dbTools.getAllClientBaseCode(),a=JSON.stringify(o),t=crypto.createHash("sha256");t.update(a);var s=t.digest("hex");e.query.hash===s?(logger.debug("local storage not need refresh from %s",e.ip),r.json({hash:s})):(logger.debug("local storage refresh from %s",e.ip),r.json({hash:s,value:o}))};