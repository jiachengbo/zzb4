"use strict";function GroupSocket(){putils.GroupData.apply(this,arguments)}var path=require("path"),putils=require(path.resolve("./config/private/utils")),logger=require(path.resolve("./config/lib/logger")).getLogger("socketio");GroupSocket.prototype=Object.create(putils.GroupData.prototype),module.exports=GroupSocket,GroupSocket.prototype.getUserSocket=function(r){var e=putils.getObjId(r),t=this.getGroup("sockets");if(!t)return t;for(var u=0;u<t.length;u++){var o=t[u];if(o.request&&o.request.user&&o.request.user.id===e)return o}return null},GroupSocket.prototype.getGroupSockets=function(r,e){var t=this.getGroup(r);if(!t)return[];var u;return Array.isArray(e)&&(u=e.map(function(r){return putils.getObjId(r)})),t.filter(function(r){var e=r.request&&r.request.user&&r.request.user.id;return e&&(!Array.isArray(u)||-1===u.indexOf(e))})},GroupSocket.prototype.getGroupUsers=function(r,e){var t=this.getGroupSockets(r,e);return t?t.map(function(r){return r.request.user}):[]};